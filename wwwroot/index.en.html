<html>
	<head>
		<link rel="stylesheet" type="text/css" href="/css/site.css"> 
		<meta charset="UTF-8">
	</head>
	<body class="faq">
		<h1>FAQ</h1>
		<h2>What is this?</h2>
		<p>
			An online battlemap.
			<br/>
			You can add, move and remove tokens, color the map grid, etc.
		</p>
		<h2>How does it work?</h2>
		<p>
			ASP.NET Core in C# under .NET core,
			<br/>
			SignalR for real time bidirectional RPC,
			<br/>
			layered HTML5 canvases for rendering,
			<br/>
			all joined with janky vanilla JS
			<br/>
			The code is available <a href="https://github.com/loglob/battlemap">here.</a>
		</p>
		<h2 id="players">How do I use it? (for players)</h2>
		<p>
			<ul>
				<li>Your DM sends you a link, which you click on</li>
				<li>Zoom out a bit to see the full map</li>
				<li>Use the cursor or shape tool to mark a shape, then press 'H' to highlight it</li>
			</ul>
		</p>
		<h2 id="dm">How do I use it? (for DMs)</h2>
		<p>
			<ul>
				<li><a href="/map">This link</a> always leads to a new, empty map</li>
				<li>The same link will always lead to the same map.</li>
				<li>The "&dm=true" query argument determines if the DM toolbox is available</li>
				<li>
					Drag and drop an image onto a token to set its sprite.
					<br/>
					However:
					<ul>
						<li>Local files must be below 1MiB</li>
						<li><i>Some</i> online images are accepted (limited due to CORS and data URLs)</li>
						<li>Check the console (F12) for a semi-helpful error message</li>
					</ul>
				</li>
			</ul>
		</p>
		<p>
			Shift-click lets you pin some tool windows to the upper-right corner.
		</p>
		<h3 id="tools">The tools:</h3>
		<h3>Cursor (🖰)</h3>
		<p>
			Click & drag to move tokens
			<br/>
			double click to highlight a token/space (visible for everyone)
			<br/>
			Shift click and drag to measure distance
			<br/>
			Control click & drag to create circular mask
			<br/>
			Press DEL to delete marked tokens
			<br/>
			(Use ESC as a shortcut to the cursor)
		</p>
		<h3>Add Token (+)</h3>
		<p>
			Set token properties in the bottom-right window.
			<br/>
			Shift-click to automatically number created tokens.
			<br/>
			Control-click to copy a token's properties.
		</p>
		<h3>Remove Token (-)</h3>
		<p>
			Removes tokens.
			<br/>
			Shift click removes only a token's sprite
		</p>
		<h3>Tile edit (🖌️)</h3>
		<p>
			Colors in the map grid.
			<br/>
			Select a color on the bottom-right.
			<br/>
			Shift-click to copy a space's color.
		</p>
		<h3>Resize Map (🗺️)</h3>
		<p>
			Changes the map size.
			<br/>
			Set the size change for every side in the bottom-right window.
			<br/>
			If shrinking the map would remove tokens, the resize needs to be confirmed.
		</p>
		<h3>Effects (🔥)</h3>
		<p>
			Keeps track of all highlighted and permanent Shapes.
			<br/>
			💾 Makes a shape permanent
			<br/>
			👁️ Highlights the shape
			<br/>
			🗑️ Deletes the shape
		</p>
		<h3>Hiding (👁️)</h3>
		<p>
			Hides tokens.
			<br/>
			Hidden tokens are only visible for DMs and are marked with a 👁️.
		</p>
		<h3>Spawn Zone (🏥)</h3>
		<p>
			Sets the spawn zone, in which new tokens are added.
			<br/>
			If a player joins the map, they're asked for the name of their token.
			<br/>
			If it doesn't exist already, a 1x1 token is created in the spawnzone for them.
			<br/>
			Pressing DEL removes the spawnzone.
		</p>
		<h3>Initiative Tracker (⏱️)</h3>
		<p>
			Click to add tokens to the list. Their position is calculated as 1d20 + the given modifier.
			<br/>
			Natural 20s turn to +99, natural 1s to -99.
			<br/>
			Shift-click to add tokens without generating values.
			<br/>
			Click on a token to mark it as the current token.
			<br/>
			Press ▶️ to mark the next token.
			<br/>
			(⚠️ The list is stored locally, not on the server)
		</p>
		<h3>Setings (⚙️)</h3>
		<p>
			Configures map settings.
			<br/>
			The given √2 Approximation is used to calculate distance.
		</p>
		<h3>Shapes (⬡)</h3>
		<p>
			Draws shapes on the map.
			<br/>
			Select the shape on the bottom right.
			<br/>
			Pressing H highlights the shape.
			<br/>
			All marked tokens can be moved at once.
		</p>
		<h3>Dice (🎲)</h3>
		<p>
			Rolls dice.
			<br/>
			The 🗑️ delete the values of some/all dice.
		</p>
		<h1 id="todo">TODO</h1>
		<ul>
			<li>Effect Sprites</li>
			<li>Effect Ordering</li>
			<li>Sprite caching</li>
			<li>(Full) Mobile Support (maybe)</li>
		</ul>
		<h2>Known Bugs</h2>
		<ul>
			<li>Desync (Mitigations in place)</li>
		</ul>
	</body>
</html>
